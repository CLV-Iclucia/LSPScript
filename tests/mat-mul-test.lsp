spm<3, 4> x = {{0, 0, 1}, {2, 1, 2}, {2, 3, 1}};
spm<4, 4> y = {{0, 0, 2}, {1, 1, 2}, {2, 2, 2}, {3, 3, 2}};
spm<3, 4> ans = x;
for (var i = 0; i < 3; i++) {
    ans *= y;
}
spm<3, 4> z = {{0, 0, 1}, {1, 1, 1}};

return ans + z;